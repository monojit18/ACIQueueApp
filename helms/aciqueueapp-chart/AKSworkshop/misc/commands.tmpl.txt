tenantId=""
subscriptionId=""
clusterName="aks-workshop-cluster"
resourceGroup="aks-workshop-rg"
acrName=""

az login --tenant $tenantId
az aks get-credentials -g $resourceGroup -n $clusterName
k config set-context --current --namespace=aks-workshop-dev

#docker build -t $acrName.azurecr.io/aciqueue-app:v1.0.0 .
az acr build -t $acrName.azurecr.io/aciqueue-app:v1.0.0 -r $acrName .

k create secret generic web-jobs-storage-secret --from-literal=AzureWebJobsStorage=''

helm repo add kedacore https://kedacore.github.io/charts
helm repo update
k create namespace keda
helm install keda kedacore/keda -n keda

#helm uninstall keda -n keda

DEV
===

helm install aciqueueapp-chart -n aks-workshop-dev ./aciqueueapp-chart/ -f ./aciqueueapp-chart/AKSWorkshop/values-dev.yaml
helm upgrade aciqueueapp-chart -n aks-workshop-dev ./aciqueueapp-chart/ -f ./aciqueueapp-chart/AKSWorkshop/values-dev.yaml
helm uninstall aciqueueapp-chart -n aks-workshop-dev

QA
==

helm install aciqueueapp-chart -n aks-workshop-qa ./aciqueueapp-chart/ -f ./aciqueueapp-chart/AKSWorkshop/values-qa.yaml
helm upgrade aciqueueapp-chart -n aks-workshop-qa ./aciqueueapp-chart/ -f ./aciqueueapp-chart/AKSWorkshop/values-qa.yaml
helm uninstall aciqueueapp-chart -n aks-workshop-qa





